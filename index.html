<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charades Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&family=Space+Mono:wght@400;700&display=swap');

        :root {
            --primary: #6366f1;
            --secondary: #ec4899;
            --accent: #f59e0b;
            --success: #10b981;
            --danger: #ef4444;
            --dark: #1f2937;
            --light: #f9fafb;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            color: var(--dark);
            overflow-x: hidden;
        }

        @keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }
            50% {
                background-position: 100% 50%;
            }
            100% {
                background-position: 0% 50%;
            }
        }

        #root {
            width: 100%;
            max-width: 500px;
            height: 100%;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(0);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
            }
            50% {
                box-shadow: 0 0 30px rgba(99, 102, 241, 0.8);
            }
            100% {
                box-shadow: 0 0 10px rgba(99, 102, 241, 0.5);
            }
        }

        /* Container */
        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.2);
            padding: 30px 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            width: 100%;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Landscape mode adjustments */
        @media (max-height: 600px) and (orientation: landscape) {
            #root {
                max-width: 100%;
                height: auto;
            }

            .container {
                min-height: auto;
                padding: 15px 20px;
                border-radius: 0;
            }

            .header {
                margin-bottom: 15px;
            }

            .title {
                font-size: 24px;
                margin-bottom: 5px;
            }

            .subtitle {
                font-size: 12px;
            }

            .game-screen {
                gap: 12px;
            }

            .word-container {
                padding: 20px 15px;
                min-height: 120px;
            }

            .word-display {
                font-size: 28px;
            }

            .word-label {
                font-size: 12px;
                margin-bottom: 8px;
            }

            .timer {
                font-size: 36px;
            }

            .stat-box {
                padding: 10px;
            }

            .stat-label {
                font-size: 10px;
            }

            .stat-value {
                font-size: 18px;
            }

            .btn {
                padding: 12px;
                font-size: 13px;
            }
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
            animation: slideInUp 0.6s ease-out;
        }

        .title {
            font-size: 48px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            letter-spacing: -1px;
        }

        .subtitle {
            font-size: 16px;
            color: var(--dark);
            font-weight: 500;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .timestamp {
            font-size: 11px;
            color: var(--dark);
            opacity: 0.5;
            margin-top: 8px;
            font-style: italic;
            font-weight: 400;
        }

        .fullscreen-btn,
        .tilt-toggle {
            position: absolute;
            background: rgba(99, 102, 241, 0.1);
            border: 2px solid rgba(99, 102, 241, 0.3);
            border-radius: 12px;
            font-size: 20px;
            cursor: pointer;
            padding: 10px 14px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .fullscreen-btn {
            top: 0;
            right: 0;
        }

        .tilt-toggle {
            top: 0;
            left: 0;
        }

        .fullscreen-btn:hover,
        .tilt-toggle:hover {
            transform: scale(1.1) rotate(5deg);
            background: rgba(99, 102, 241, 0.2);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.3);
        }

        .tilt-toggle.active {
            background: rgba(16, 185, 129, 0.2);
            border-color: rgba(16, 185, 129, 0.5);
            animation: pulse-glow 2s ease-in-out infinite;
        }

        body.fullscreen-mode {
            padding: 0;
        }

        body.fullscreen-mode #root {
            max-width: 100%;
            height: 100vh;
        }

        body.fullscreen-mode .container {
            border-radius: 0;
            padding: 20px 15px;
            min-height: 100vh;
            max-width: 100%;
        }

        body.fullscreen-mode .header {
            margin-bottom: 20px;
        }

        body.fullscreen-mode .title {
            font-size: 28px;
        }

        /* Category Selection */
        .category-selector {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .category-label {
            font-size: 16px;
            font-weight: 600;
            color: #333;
            text-align: center;
        }

        .category-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            max-height: 70vh;
            overflow-y: auto;
            padding-right: 5px;
        }

        @media (min-width: 500px) {
            .category-grid {
                grid-template-columns: 1fr 1fr 1fr;
            }
        }

        @media (min-width: 768px) {
            .category-grid {
                grid-template-columns: 1fr 1fr 1fr 1fr;
            }
        }

        .category-btn {
            padding: 18px 15px;
            border: 2px solid rgba(99, 102, 241, 0.2);
            border-radius: 18px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.3));
            font-size: 15px;
            font-weight: 700;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-align: center;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .category-btn:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.25);
            border-color: rgba(99, 102, 241, 0.4);
        }

        .category-btn.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border-color: transparent;
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.4);
            transform: scale(1.05) translateY(-8px);
        }

        .start-btn {
            width: 100%;
            padding: 18px;
            margin-top: 20px;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%);
            color: white;
            border: none;
            border-radius: 18px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 10px 30px rgba(236, 72, 153, 0.3);
            letter-spacing: 0.5px;
            animation: slideInUp 0.6s ease-out 0.2s both;
        }

        .start-btn:hover:not(:disabled) {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(236, 72, 153, 0.4);
            letter-spacing: 1px;
        }

        .start-btn:active:not(:disabled) {
            transform: translateY(-2px);
        }

        .start-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Game Screen */
        .game-screen {
            display: flex;
            flex-direction: column;
            gap: 20px;
            flex: 1;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            gap: 12px;
            margin-bottom: 15px;
            animation: slideInUp 0.6s ease-out;
        }

        .stat-box {
            flex: 1;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 20px 15px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }

        .stat-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.3);
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.95;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 800;
            font-family: 'Space Mono', monospace;
            letter-spacing: -1px;
        }

        .timer {
            font-size: 64px;
            font-weight: 800;
            text-align: center;
            background: linear-gradient(135deg, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-variant-numeric: tabular-nums;
            font-family: 'Space Mono', monospace;
            letter-spacing: -2px;
            animation: slideInUp 0.6s ease-out;
        }

        .timer.warning {
            animation: pulse-timer 0.4s infinite;
        }

        @keyframes pulse-timer {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.6;
                transform: scale(1.05);
            }
        }

        /* Word Display */
        .word-container {
            background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%);
            color: white;
            padding: 50px 30px;
            border-radius: 25px;
            text-align: center;
            min-height: 220px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 20px 50px rgba(236, 72, 153, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideInUp 0.6s ease-out 0.1s both;
            position: relative;
            overflow: hidden;
        }

        .word-container::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% {
                transform: translate(0, 0);
            }
            50% {
                transform: translate(20px, 20px);
            }
        }

        .word-label {
            font-size: 13px;
            opacity: 0.95;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-weight: 700;
            position: relative;
            z-index: 1;
        }

        .word-display {
            font-size: 48px;
            font-weight: 800;
            word-break: break-word;
            line-height: 1.3;
            position: relative;
            z-index: 1;
            font-family: 'Poppins', sans-serif;
            letter-spacing: -1px;
        }

        @media (max-width: 480px) {
            .word-display {
                font-size: 38px;
            }

            .word-container {
                padding: 40px 20px;
            }
        }

        /* Controls */
        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            animation: slideInUp 0.6s ease-out 0.2s both;
        }

        .btn {
            padding: 18px;
            border: none;
            border-radius: 20px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            letter-spacing: 0.5px;
        }

        .btn:active {
            transform: translateY(2px);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            grid-column: 1 / -1;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(99, 102, 241, 0.4);
            letter-spacing: 1px;
        }

        .btn-secondary {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.3));
            color: var(--dark);
            border: 2px solid rgba(99, 102, 241, 0.2);
            backdrop-filter: blur(10px);
            font-weight: 700;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.85), rgba(255, 255, 255, 0.5));
            transform: translateY(-5px);
            border-color: rgba(99, 102, 241, 0.4);
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.2);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success) 0%, #059669 100%);
            color: white;
            box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
        }

        .btn-success:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(16, 185, 129, 0.4);
            letter-spacing: 1px;
        }

        /* Game Over Screen */
        .game-over-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 30px;
            text-align: center;
            animation: slideInUp 0.6s ease-out;
        }

        .game-over-title {
            font-size: 44px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            letter-spacing: -1px;
            animation: bounce 0.8s ease-in-out;
        }

        .final-score {
            font-size: 80px;
            font-weight: 800;
            background: linear-gradient(135deg, var(--secondary) 0%, var(--accent) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            font-family: 'Space Mono', monospace;
            letter-spacing: -2px;
            animation: bounce 0.8s ease-in-out 0.1s both;
        }

        .message {
            font-size: 18px;
            color: var(--dark);
            opacity: 0.8;
            margin-bottom: 20px;
            font-weight: 500;
            max-width: 300px;
            animation: slideInUp 0.6s ease-out 0.2s both;
        }

        .reset-btn {
            padding: 18px 50px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 17px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 15px 40px rgba(99, 102, 241, 0.3);
            letter-spacing: 0.5px;
            animation: slideInUp 0.6s ease-out 0.3s both;
        }

        .reset-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 25px 60px rgba(99, 102, 241, 0.4);
            letter-spacing: 1px;
        }

        .reset-btn:active {
            transform: translateY(2px);
        }

        /* Loading Spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Tilt Controls */
        .tilt-toggle {
            position: absolute;
            top: 0;
            left: 0;
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            transition: transform 0.3s ease;
            color: #667eea;
            font-weight: 600;
        }

        .tilt-toggle:hover {
            transform: scale(1.1);
        }

        .tilt-toggle.active {
            color: #10b981;
        }

        .tilt-feedback {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            animation: fadeOut 0.5s ease;
        }

        .tilt-feedback.correct {
            background: rgba(16, 185, 129, 0.3);
        }

        .tilt-feedback.skip {
            background: rgba(245, 87, 108, 0.3);
        }

        @keyframes fadeOut {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }

        .tilt-indicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: bold;
            animation: fadeOut 0.5s ease;
            z-index: 1001;
            pointer-events: none;
        }

        .tilt-indicator.correct {
            color: #10b981;
        }

        .tilt-indicator.skip {
            color: #f5576c;
        }

        .tilt-info {
            background: #f0f0f0;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            font-size: 13px;
            color: #666;
            text-align: center;
            line-height: 1.5;
        }

        .tilt-info.active {
            background: #d1fae5;
            border-color: #10b981;
            color: #065f46;
        }

        .tilt-status {
            display: inline-block;
            margin-left: 8px;
            font-weight: 600;
            color: #10b981;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Game data
        const CATEGORIES = {
            movies: {
                name: 'üé¨ Movies',
                words: [
                    'The Shawshank Redemption', 'Inception', 'The Dark Knight', 'Forrest Gump',
                    'Pulp Fiction', 'The Matrix', 'Titanic', 'Avatar', 'Interstellar', 'Parasite',
                    'Avengers Endgame', 'Joker', 'The Quiet Place', 'Knives Out', 'Dune',
                    'Top Gun', 'Back to the Future', 'Jurassic Park', 'E.T.', 'Home Alone',
                    'The Godfather', 'Gladiator', 'The Lion King', 'Frozen', 'Toy Story',
                    'Spider-Man', 'Batman Begins', 'The Avengers', 'Iron Man', 'Captain America',
                    'Thor', 'Black Panther', 'Wonder Woman', 'Aquaman', 'The Flash',
                    'Godzilla', 'King Kong', 'Jaws', 'The Ring', 'The Sixth Sense',
                    'Shrek', 'Finding Nemo', 'Inside Out', 'Coco', 'Encanto',
                    'Barbie', 'Oppenheimer', 'Barbie and Ken', 'Mission Impossible', 'Fast and Furious'
                ]
            },
            animals: {
                name: 'ü¶Å Animals',
                words: [
                    'Lion', 'Tiger', 'Elephant', 'Giraffe', 'Penguin', 'Eagle', 'Dolphin',
                    'Octopus', 'Kangaroo', 'Sloth', 'Flamingo', 'Chameleon', 'Porcupine',
                    'Hedgehog', 'Koala', 'Panda', 'Cheetah', 'Rhinoceros', 'Zebra', 'Peacock',
                    'Butterfly', 'Bee', 'Ant', 'Spider', 'Scorpion', 'Snake', 'Crocodile',
                    'Alligator', 'Turtle', 'Shark', 'Whale', 'Seal', 'Otter', 'Beaver',
                    'Squirrel', 'Rabbit', 'Deer', 'Moose', 'Bear', 'Wolf', 'Fox',
                    'Monkey', 'Gorilla', 'Chimpanzee', 'Lemur', 'Parrot', 'Owl', 'Penguin',
                    'Ostrich', 'Chicken', 'Duck', 'Swan', 'Peacock', 'Flamingo', 'Hummingbird'
                ]
            },
            celebrities: {
                name: '‚≠ê Celebrities',
                words: [
                    'Taylor Swift', 'Elon Musk', 'Dwayne Johnson', 'Oprah Winfrey', 'Beyonc√©',
                    'Leonardo DiCaprio', 'Scarlett Johansson', 'Tom Cruise', 'Cristiano Ronaldo',
                    'Lionel Messi', 'Billie Eilish', 'The Rock', 'Kim Kardashian', 'Kanye West',
                    'Ariana Grande', 'Harry Styles', 'Zendaya', 'Timoth√©e Chalamet', 'Margot Robbie',
                    'Brad Pitt', 'Johnny Depp', 'Angelina Jolie', 'Meryl Streep', 'Tom Hanks',
                    'Will Smith', 'Morgan Freeman', 'Samuel L Jackson', 'Denzel Washington', 'Idris Elba',
                    'Drake', 'The Weeknd', 'Post Malone', 'Ed Sheeran', 'Coldplay',
                    'Rihanna', 'Lady Gaga', 'Shakira', 'Britney Spears', 'Madonna'
                ]
            },
            tvshows: {
                name: 'üì∫ TV Shows',
                words: [
                    'Breaking Bad', 'Game of Thrones', 'Stranger Things', 'The Office', 'Friends',
                    'The Crown', 'The Mandalorian', 'House of Dragon', 'Wednesday', 'Squid Game',
                    'Andor', 'Severance', 'The Last of Us', 'Succession', 'Succession',
                    'Peaky Blinders', 'Sherlock', 'Doctor Who', 'Black Mirror', 'Westworld',
                    'The Witcher', 'Vikings', 'Dexter', 'The Sopranos', 'The Wire',
                    'Brooklyn Nine-Nine', 'The Good Place', 'Parks and Recreation', 'Community', 'It\'s Always Sunny',
                    'South Park', 'Family Guy', 'Rick and Morty', 'The Simpsons', 'Futurama'
                ]
            },
            food: {
                name: 'üçï Food',
                words: [
                    'Pizza', 'Burger', 'Tacos', 'Sushi', 'Pasta', 'Ramen', 'Pho',
                    'Curry', 'Kebab', 'Sandwich', 'Hotdog', 'Fried Chicken', 'Steak', 'Salmon',
                    'Lobster', 'Crab', 'Shrimp', 'Fish and Chips', 'Nachos', 'Quesadilla',
                    'Burrito', 'Enchilada', 'Pad Thai', 'Teriyaki', 'Dim Sum', 'Dumplings',
                    'Meatballs', 'Risotto', 'Paella', 'Chowder', 'Soup', 'Salad', 'Sandwich',
                    'Donut', 'Cake', 'Cookies', 'Ice Cream', 'Chocolate', 'Candy', 'Popcorn',
                    'Pretzel', 'Chips', 'Fruit', 'Vegetables', 'Bread', 'Cheese', 'Yogurt'
                ]
            },
            music: {
                name: 'üéµ Music',
                words: [
                    'Rock', 'Pop', 'Hip Hop', 'Jazz', 'Blues', 'Country', 'Classical',
                    'Electronic', 'Reggae', 'Metal', 'Punk', 'Rap', 'R&B', 'Soul',
                    'Gospel', 'K-pop', 'Disco', 'Techno', 'House Music', 'Indie',
                    'Alternative', 'Grunge', 'Emo', 'Folk', 'Latin', 'Afrobeat', 'Trap',
                    'Drill', 'Grime', 'Dubstep', 'Drum and Bass', 'Trance', 'Ambient', 'Noise'
                ]
            },
            books: {
                name: 'üìö Books',
                words: [
                    'Harry Potter', 'The Lord of the Rings', 'Game of Thrones', 'The Hobbit',
                    'Percy Jackson', 'Hunger Games', 'Divergent', 'The Maze Runner', 'To Kill a Mockingbird',
                    '1984', 'Pride and Prejudice', 'Jane Eyre', 'Wuthering Heights', 'The Great Gatsby',
                    'Moby Dick', 'The Catcher in the Rye', 'Brave New World', 'Dune', 'Ender\'s Game',
                    'The Chronicles of Narnia', 'A Series of Unfortunate Events', 'Percy Jackson', 'The Inheritance Cycle',
                    'Twilight', 'New Moon', 'Breaking Dawn', 'The Fault in Our Stars', 'Paper Towns'
                ]
            },
            sports: {
                name: '‚öΩ Sports',
                words: [
                    'Basketball', 'Football', 'Soccer', 'Tennis', 'Boxing', 'Swimming',
                    'Golf', 'Skateboarding', 'Surfing', 'Skiing', 'Volleyball', 'Hockey',
                    'Baseball', 'Cricket', 'Rugby', 'Gymnastics', 'Yoga', 'Weightlifting',
                    'Track and Field', 'Badminton', 'Ping Pong', 'Martial Arts', 'Karate',
                    'Taekwondo', 'Judo', 'Wrestling', 'Bowling', 'Darts',
                    'Archery', 'Climbing', 'Cycling', 'Rowing', 'Ice Skating'
                ]
            },
            jobs: {
                name: 'üíº Jobs',
                words: [
                    'Doctor', 'Teacher', 'Chef', 'Pilot', 'Astronaut', 'Superhero',
                    'Mechanic', 'Dentist', 'Magician', 'Ninja', 'Pirate', 'Firefighter',
                    'Police Officer', 'Scientist', 'Artist', 'Musician', 'Dancer', 'Athlete',
                    'Nurse', 'Surgeon', 'Lawyer', 'Judge', 'Engineer', 'Architect',
                    'Plumber', 'Electrician', 'Carpenter', 'Baker', 'Farmer', 'Hunter',
                    'Sailor', 'Astronomer', 'Archaeologist', 'Paleontologist', 'Zoologist', 'Biologist'
                ]
            },
            actions: {
                name: 'üé≠ Actions',
                words: [
                    'Dancing', 'Swimming', 'Sleeping', 'Running', 'Cooking', 'Fishing',
                    'Painting', 'Singing', 'Jumping', 'Stretching', 'Lifting', 'Falling',
                    'Driving', 'Typing', 'Reading', 'Writing', 'Thinking', 'Snoring',
                    'Laughing', 'Crying', 'Smiling', 'Frowning', 'Yawning', 'Sneezing',
                    'Eating', 'Drinking', 'Walking', 'Running', 'Crawling', 'Climbing',
                    'Falling', 'Flying', 'Swimming', 'Diving', 'Skateboarding', 'Surfing',
                    'Skiing', 'Sledding', 'Ice Skating', 'Roller Skating', 'Biking', 'Kicking'
                ]
            },
            countries: {
                name: 'üåç Countries',
                words: [
                    'United States', 'Canada', 'Mexico', 'Brazil', 'Argentina', 'Chile', 'Peru',
                    'Colombia', 'Venezuela', 'Ecuador', 'Bolivia', 'Paraguay', 'Uruguay',
                    'United Kingdom', 'France', 'Germany', 'Italy', 'Spain', 'Portugal', 'Greece',
                    'Netherlands', 'Belgium', 'Switzerland', 'Austria', 'Sweden', 'Norway', 'Denmark',
                    'Finland', 'Poland', 'Czech Republic', 'Hungary', 'Romania', 'Bulgaria',
                    'Japan', 'China', 'India', 'South Korea', 'Thailand', 'Vietnam', 'Philippines',
                    'Indonesia', 'Malaysia', 'Singapore', 'Australia', 'New Zealand', 'South Africa'
                ]
            },
            games: {
                name: 'üéÆ Games',
                words: [
                    'Minecraft', 'Fortnite', 'Call of Duty', 'Grand Theft Auto', 'Elden Ring',
                    'Dark Souls', 'Skyrim', 'The Witcher 3', 'Final Fantasy', 'Zelda',
                    'Mario', 'Donkey Kong', 'Pac Man', 'Space Invaders', 'Tetris',
                    'Pok√©mon', 'Diablo', 'World of Warcraft', 'League of Legends', 'Valorant',
                    'Counter Strike', 'Dota 2', 'Overwatch', 'Rust', 'Ark Survival',
                    'Sims', 'Animal Crossing', 'Stardew Valley', 'Civilization', 'Age of Empires'
                ]
            }
        };

        const GAME_DURATION = 60; // seconds
        const INITIAL_TIME = 60;

        // Audio context for sound effect
        function playTimeUpSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();

                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);

                oscillator.frequency.value = 800;
                oscillator.type = 'sine';

                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);

                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log('Audio not supported');
            }
        }

        function GameApp() {
            const [gameState, setGameState] = useState('category-select'); // category-select, playing, game-over
            const [selectedCategory, setSelectedCategory] = useState(null);
            const [score, setScore] = useState(0);
            const [skipped, setSkipped] = useState(0);
            const [currentWord, setCurrentWord] = useState(null);
            const [timeLeft, setTimeLeft] = useState(INITIAL_TIME);
            const [usedWords, setUsedWords] = useState(new Set());
            const [isFullscreen, setIsFullscreen] = useState(false);
            const [tiltEnabled, setTiltEnabled] = useState(false);
            const [tiltFeedback, setTiltFeedback] = useState(null);
            const [deviceSupportsOrientation, setDeviceSupportsOrientation] = useState(false);
            const timerRef = useRef(null);
            const gameStartTimeRef = useRef(null);
            const tiltCooldownRef = useRef(0);
            const lastBetaRef = useRef(0);

            // Toggle fullscreen mode
            const toggleFullscreen = () => {
                setIsFullscreen(!isFullscreen);
                if (!isFullscreen) {
                    document.body.classList.add('fullscreen-mode');
                } else {
                    document.body.classList.remove('fullscreen-mode');
                }
            };

            // Play sound effect
            function playSound(frequency = 800, duration = 0.2) {
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();

                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);

                    oscillator.frequency.value = frequency;
                    oscillator.type = 'sine';

                    gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);

                    oscillator.start(audioContext.currentTime);
                    oscillator.stop(audioContext.currentTime + duration);
                } catch (e) {
                    console.log('Audio not supported');
                }
            }

            // Handle tilt detection
            const handleTilt = React.useCallback((event) => {
                const now = Date.now();
                if (now - tiltCooldownRef.current < 1000) return; // 1 second cooldown

                const beta = event.beta; // x rotation: -180 to 180
                console.log('Beta angle:', beta); // Debug log
                lastBetaRef.current = beta;

                // Tilt down (phone toward forehead goes down) = correct
                // beta < -40 means tilted down significantly
                if (beta < -40) {
                    console.log('CORRECT detected');
                    tiltCooldownRef.current = now;
                    setTiltFeedback('correct');
                    playSound(1200, 0.15); // Higher pitch for correct

                    setScore(prev => prev + 1);
                    const newUsed = new Set(usedWords);
                    newUsed.add(currentWord);
                    setUsedWords(newUsed);
                    const nextWord = getRandomWord(selectedCategory);
                    setCurrentWord(nextWord);

                    setTimeout(() => setTiltFeedback(null), 500);
                }
                // Tilt up (phone toward forehead goes up) = skip
                // beta > 40 means tilted up significantly
                else if (beta > 40) {
                    console.log('SKIP detected');
                    tiltCooldownRef.current = now;
                    setTiltFeedback('skip');
                    playSound(600, 0.15); // Lower pitch for skip

                    setSkipped(prev => prev + 1);
                    const newUsed = new Set(usedWords);
                    newUsed.add(currentWord);
                    setUsedWords(newUsed);
                    const nextWord = getRandomWord(selectedCategory);
                    setCurrentWord(nextWord);

                    setTimeout(() => setTiltFeedback(null), 500);
                }
            }, [usedWords, currentWord, selectedCategory]);

            // Toggle tilt controls
            const toggleTiltControl = () => {
                if (!deviceSupportsOrientation) return;
                const newState = !tiltEnabled;
                setTiltEnabled(newState);

                if (newState && gameState === 'playing') {
                    // Request permission for iOS 13+
                    if (typeof DeviceOrientationEvent !== 'undefined' && typeof DeviceOrientationEvent.requestPermission === 'function') {
                        DeviceOrientationEvent.requestPermission()
                            .then(permissionState => {
                                if (permissionState === 'granted') {
                                    window.addEventListener('deviceorientation', handleTilt);
                                    console.log('Tilt controls enabled (iOS)');
                                }
                            })
                            .catch(console.error);
                    } else {
                        // Non-iOS 13+ devices
                        window.addEventListener('deviceorientation', handleTilt);
                        console.log('Tilt controls enabled (Android)');
                    }
                } else {
                    window.removeEventListener('deviceorientation', handleTilt);
                    console.log('Tilt controls disabled');
                }
            };

            // Check for device orientation support
            useEffect(() => {
                const hasOrientation =
                    typeof window !== 'undefined' &&
                    (typeof DeviceOrientationEvent !== 'undefined' || 'ontouchstart' in window);
                setDeviceSupportsOrientation(hasOrientation);
            }, []);

            // Cleanup tilt event listener
            useEffect(() => {
                return () => {
                    window.removeEventListener('deviceorientation', handleTilt);
                };
            }, [tiltEnabled, gameState]);

            // Get random word from category
            const getRandomWord = (category) => {
                const words = CATEGORIES[category].words;
                let word;
                let attempts = 0;
                do {
                    word = words[Math.floor(Math.random() * words.length)];
                    attempts++;
                } while (usedWords.has(word) && attempts < 20);
                return word;
            };

            // Start game
            const startGame = () => {
                if (!selectedCategory) return;
                setGameState('playing');
                setScore(0);
                setSkipped(0);
                setUsedWords(new Set());
                setTimeLeft(INITIAL_TIME);
                setCurrentWord(getRandomWord(selectedCategory));
                gameStartTimeRef.current = Date.now();
            };

            // Timer effect
            useEffect(() => {
                if (gameState !== 'playing') return;

                timerRef.current = setInterval(() => {
                    setTimeLeft((prev) => {
                        if (prev <= 1) {
                            playTimeUpSound();
                            setGameState('game-over');
                            return 0;
                        }
                        return prev - 1;
                    });
                }, 1000);

                return () => clearInterval(timerRef.current);
            }, [gameState]);

            // Correct answer
            const handleCorrect = () => {
                const newUsed = new Set(usedWords);
                newUsed.add(currentWord);
                setUsedWords(newUsed);
                setScore(score + 1);
                const nextWord = getRandomWord(selectedCategory);
                setCurrentWord(nextWord);
            };

            // Skip word
            const handleSkip = () => {
                const newUsed = new Set(usedWords);
                newUsed.add(currentWord);
                setUsedWords(newUsed);
                setSkipped(skipped + 1);
                const nextWord = getRandomWord(selectedCategory);
                setCurrentWord(nextWord);
            };

            // Reset game
            const resetGame = () => {
                setGameState('category-select');
                setSelectedCategory(null);
                setScore(0);
                setSkipped(0);
                setTimeLeft(INITIAL_TIME);
                setUsedWords(new Set());
                setCurrentWord(null);
            };

            if (gameState === 'category-select') {
                return (
                    <div className="container">
                        <div className="header">
                            <button className="fullscreen-btn" onClick={toggleFullscreen} title="Toggle fullscreen">
                                {isFullscreen ? '‚õ∂' : '‚õ∂'}
                            </button>
                            <div className="title">üé≠ Charades</div>
                            <div className="subtitle">Pick a category and start guessing!</div>
                            <div className="timestamp">Last updated: {new Date().toLocaleString()}</div>
                        </div>

                        <div className="category-selector">
                            <div className="category-label">Choose a Category:</div>
                            <div className="category-grid">
                                {Object.entries(CATEGORIES).map(([key, cat]) => (
                                    <button
                                        key={key}
                                        className={`category-btn ${
                                            selectedCategory === key ? 'active' : ''
                                        }`}
                                        onClick={() => setSelectedCategory(key)}
                                    >
                                        {cat.name}
                                    </button>
                                ))}
                            </div>
                            <button
                                className="start-btn"
                                onClick={startGame}
                                disabled={!selectedCategory}
                            >
                                Start Game
                            </button>
                        </div>
                    </div>
                );
            }

            if (gameState === 'playing' && currentWord) {
                return (
                    <div className="container">
                        {tiltFeedback && (
                            <>
                                <div className={`tilt-feedback ${tiltFeedback}`}></div>
                                <div className={`tilt-indicator ${tiltFeedback}`}>
                                    {tiltFeedback === 'correct' ? '‚úì' : '‚è≠Ô∏è'}
                                </div>
                            </>
                        )}
                        <div className="header">
                            <button className="fullscreen-btn" onClick={toggleFullscreen} title="Toggle fullscreen">
                                {isFullscreen ? '‚õ∂' : '‚õ∂'}
                            </button>
                            {deviceSupportsOrientation && (
                                <button
                                    className={`tilt-toggle ${tiltEnabled ? 'active' : ''}`}
                                    onClick={toggleTiltControl}
                                    title={tiltEnabled ? 'Disable tilt controls' : 'Enable tilt controls'}
                                >
                                    üì±
                                </button>
                            )}
                            <div className="title">üé≠ Charades</div>
                        </div>

                        <div className="game-screen">
                            {deviceSupportsOrientation && (
                                <div className={`tilt-info ${tiltEnabled ? 'active' : ''}`}>
                                    {tiltEnabled ? (
                                        <>
                                            üéÆ Tilt controls <span className="tilt-status">ACTIVE</span>
                                            <br />
                                            <small>Hold phone to forehead ‚Ä¢ Tilt down ‚Üì for correct ‚Ä¢ Tilt up ‚Üë to skip</small>
                                        </>
                                    ) : (
                                        <>
                                            Enable tilt controls to play like real Charades
                                        </>
                                    )}
                                </div>
                            )}
                            <div className="stats">
                                <div className="stat-box">
                                    <div className="stat-label">Correct</div>
                                    <div className="stat-value">{score}</div>
                                </div>
                                <div className="stat-box">
                                    <div className="stat-label">Skipped</div>
                                    <div className="stat-value">{skipped}</div>
                                </div>
                                <div className="stat-box">
                                    <div className="stat-label">Total</div>
                                    <div className="stat-value">{score + skipped}</div>
                                </div>
                            </div>

                            <div className={`timer ${timeLeft <= 10 ? 'warning' : ''}`}>
                                {timeLeft}s
                            </div>

                            <div className="word-container">
                                <div className="word-label">Guess the word:</div>
                                <div className="word-display">{currentWord}</div>
                            </div>

                            <div className="controls">
                                <button
                                    className="btn btn-secondary"
                                    onClick={handleSkip}
                                >
                                    ‚è≠Ô∏è Skip
                                </button>
                                <button
                                    className="btn btn-success"
                                    onClick={handleCorrect}
                                >
                                    ‚úì Got It!
                                </button>
                                <button
                                    className="btn btn-primary"
                                    onClick={() => setGameState('game-over')}
                                >
                                    End Game
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            if (gameState === 'game-over') {
                const total = score + skipped;
                return (
                    <div className="container">
                        <div className="header">
                            <button className="fullscreen-btn" onClick={toggleFullscreen} title="Toggle fullscreen">
                                {isFullscreen ? '‚õ∂' : '‚õ∂'}
                            </button>
                            <div className="timestamp">Last updated: {new Date().toLocaleString()}</div>
                        </div>
                        <div className="game-over-screen">
                            <div className="game-over-title">‚è±Ô∏è Time's Up!</div>
                            <div className="final-score">{score}</div>
                            <div className="message">
                                {total === 0
                                    ? 'No words guessed. Try again!'
                                    : `${score} correct out of ${total} total!`}
                            </div>
                            <button className="reset-btn" onClick={resetGame}>
                                Play Again
                            </button>
                        </div>
                    </div>
                );
            }

            return null;
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<GameApp />);
    </script>
</body>
</html>
